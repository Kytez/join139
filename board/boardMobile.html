<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Board</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="boardStyleMobile.css">
    <link rel="stylesheet" href="../assets/templates/nav.css">
    <link rel="stylesheet" href="../assets/templates/navDesktop.css">
    <link rel="stylesheet" href="../assets/templates/header.css">
    <link rel="stylesheet" href="../assets/templates/headerDesktop.css">
    <link rel="stylesheet" href="./taskBoard.css">
    <link rel="stylesheet" href="../assets/templates/menu_pop_up.css">
    <link rel="shortcut icon" href="../assets/img/header/header_logo.png" type="image/x-icon">


    <script src="../board/drag.js"></script>
    <script src="../board/board.js"></script>
    <script src="../board/render_tasks-board.js"></script>
    <script src="../contact/render_contacts.js"></script>
    <script src="../script.js"></script>
    <script src="../board/addTask.js"></script>
    <script src="../board/editTask.js"></script>
    <script src="../board/editSubTask.js"></script>
    <script src="../board/editPrioTask.js"></script>
    <script src="../board/editFilterTask.js"></script>
    <script src="../board/checkedTasks.js"></script>
    <script src="../node_modules/drag-drop-touch/DragDropTouch.js"></script>
</head>
<body onload="initBoard()" class="margin-body-mobile">

    <div id="headerMobile" w3-include-html="../assets/templates/header.html"></div>

    <div id="headerDesktop" w3-include-html="../assets/templates/headerDesktop.html"></div>

    <div class="d-none" id="popUpMenuHeader" w3-include-html="../assets/templates/menu_pop_up.html"></div>

    <section id="boardBodyProgress">
        
        <div class="board-container">
            <div class="board space-between">
                <h1>Board</h1> 
                <div onclick="showAddTask()">
                    <img class="plus-img-dark" src="../assets/img/icons/plus-add-task-mobile.png">
                </div>
            </div>
            <div class="flex align-items-center">
                <input onkeyup="filterTask()" onchange="filterTask()" class="find-task space-between" type="search" placeholder="Find Task" id="site-search" name="q" />  
                <div class="search-bar-seperator"></div>  
                <button onclick="showAddTask()" class="add-task-button">Add Task <img src="../assets/img/icons/add-white.png" alt=""></button>    
            </div>
        </div>
        <div class="progress-section">
            <div class="width-100 mt-24">
                <div class="abstand-24 space-between">
                    <h2>To do</h2>
                    <div onclick="addTaskToSectionButton('todo')">
                        <img class="plus-img" src="../assets/img/icons/plus-button-mobile.png">
                    </div>
                </div>
                <div class="horizontal-scroll pb-40" id="todo" ondrop="moveTo('todo')" ondragover="allowDrop(event); addDragBorder('todo')" ondragleave="removeDragBorder('todo')">
                </div>
            </div>
            <div class="width-100">
                <div class="abstand-24 space-between">
                    <h2>In progress</h2>
                    <div onclick="addTaskToSectionButton('inprogress')">
                        <img class="plus-img" src="../assets/img/icons/plus-button-mobile.png">
                    </div>
                </div>   
                <div id="inprogress" class="pb-40" ondrop="moveTo('inprogress')" ondragover="allowDrop(event); addDragBorder('inprogress')" ondragleave="removeDragBorder('inprogress')">
            </div>
            </div>
            <div class="width-100">
                <div class="abstand-24 space-between">
                    <h2>Await feedback</h2>
                    <div onclick="addTaskToSectionButton('feedback')">
                        <img class="plus-img" src="../assets/img/icons/plus-button-mobile.png">
                    </div>
                </div>
                <div id="feedback" class="pb-40" ondrop="moveTo('feedback')" ondragover="allowDrop(event); addDragBorder('feedback')" ondragleave="removeDragBorder('feedback')">
                </div>
            </div>
            <div class="width-100 pb-16">
                <div class="abstand-24 space-between height28px">
                    <h2>Done</h2>
                </div>
                <div id="done" class="pb-40" ondrop="moveTo('done')" ondragover="allowDrop(event); addDragBorder('done')" ondragleave="removeDragBorder('done')">
                </div>
            </div>
        </div>
    </section>

    <section id="tasks" onclick="hideTask()" class="pop-up-section">
        <div onclick="doNotClose(event)" id="taskPopUp" class="pop-up">
            <div class="task-padding scroll gap">
                <div class="space-between subtasks-checkbox">
                    <div class="task-title">User Story</div> 
                    <img onclick="hideTask()" class="close-img" src="../assets/img/icons/close.png">
                </div>
                
                <span class="pop-up-headline">Kochwelt Page & Recipe Recommender</span> <br>
                <div class="margin-top-16">
                    <span>Build start page with recipe recoomendation...</span>
                </div>
                <div class="margin-top-16">
                    <span>Due date:</span>
                    <span>10/05/2020</span>
                </div>
                <div class="margin-top-16 user-flex">
                    <span>Priority:</span>
                    <div class="user-prio">
                        <span>medium</span> 
                        <img src="../assets/img/icons/line.png" alt="">
                    </div>
                </div>
                <div class="margin-top-16">
                    <span>Assigned To:</span>
                    <div class="margin-top-16 user-flex user-assigned subtasks-checkbox">
                        <div class="pop-up-user-circle">AM</div>
                        <span>Emanuel DeiMudda</span>
                    </div>
                </div>
                <div class="margin-top-16">
                    <span>Subtasks:</span>
                    <div class="">
                        <div class="margin-top-16 subtasks-checkbox user-assigned">
                            <img src="../assets/img/icons/Check-box-mobile.png" alt="">
                            <span>Implement Recipe recoomendation</span>
                        </div>
                        <div class="margin-top-16 subtasks-checkbox user-assigned">
                            <img src="../assets/img/icons/Check-button-mobile.png" alt="">
                            <span>Start Page Layout</span>
                        </div>
                    </div>
                </div>
                <div class="margin-top-16 subtask-edit-delete user-flex">
                    <div class="subtasks-checkbox">
                        <img src="../assets/img/icons/delete.png" alt="">
                        <span>Delete</span>
                    </div>
                    <div class="subtasks-seperator"></div>
                    <div class="subtasks-checkbox">
                        <img src="../assets/img/icons/edit.png" alt="">
                        <span>Edit</span>
                    </div>
                </div>
            </div>
        </div>
    </section>


<section  onclick="hideAddTask()" id="addTaskFullScreen" class="add-task-background">
    <form onclick="doNotClose(event); closeContactList('selected-contactsBoard')" onsubmit="addTaskBoard('todo'); return false" id="addTaskSection" class="add-task-card-board">
        <section class="headline-section">
            <h1>Add Task</h1>
        </section>
        <section class="add-task">
    
            <section class="add-task-section">
                <div class="size-100 padding-top-big"> 
                    <div>
                        <span>Title</span><span class="red">*</span>
                    </div>
                    <input required id="titleBoard" type="text" placeholder="Enter a title" required minlength="4" >
                </div>
                <div class="size-100 padding-top-big">
                    <div>
                        <span>Description</span>
                    </div>
                    <textarea id="descriptionBoard" placeholder="Enter a Description" name="" id="" cols="30" rows="3"></textarea>
                </div>
                <div onclick="doNotClose(event);" class="size-100 padding-top-big">
                    <div>
                        <span>Assigned to</span>
                    </div>
                    <input oninput="setFilterBoard(this)" type="text" onclick="showContactListBoard()" class="styled-input" placeholder="Select contacts to assign" id="contact-selectBoard" name="contacts" autocomplete="off">
                    <section class="d-none contact-list" id="selected-contactsBoard"></section>
                    <div id="contactInitalsBoard"></div>
                    
            
                </input>
                </div>
            </section>
            
            <div class="line"></div>
    
            <section class="add-task-section">
                <div class="size-100 padding-top-big"> 
                    <div>
                        <span>Due date</span><span class="red">*</span>
                    </div>
                    <input class="focus-blue" required id="dateBoard" type="date" min="" max="9999-12-31">
                </div>
                <div class="prio-container padding-top-big">
                    <span>Prio</span>
                    <section class="prio-button-section">
                        <div id="urgentBoard" onclick="handleClickPrioBoard('urgent', 'board')" class="prio-button">
                            <span id="prio_urgentBoard">Urgent</span> 
                            <div class="arrow">
                                <img src="../assets/img/svg/up.svg">
                            </div>
                        </div>
                        <div id="mediumBoard" onclick="handleClickPrioBoard('medium', 'board')" class="prio-button highlighted-button-medium">
                            <span id="prio_mediumBoard">Medium</span>  
                            <div class="arrow">
                                <img src="../assets/img/svg/line.svg">
                            </div>
                        </div>
                        <div id="lowBoard" onclick="handleClickPrioBoard('low', 'board')" class="prio-button">
                            <span id="prio_lowBoard">Low</span>
                            <div class="arrow">
                                <img src="../assets/img/svg/down.svg">
                            </div>
                        </div>
                    </section>
                    <div class="size-100 padding-top-big">
                        <div>
                            <span>Category <span class="red">*</span></span>
                        </div>
                        <select required class="focus-blue" name="contacts" id="categoryBoard">
                            <option value="" disabled selected>Select task category</option>
                            <option value="Technical Task">Technical Task</option>
                            <option value="User Story">User Story</option>
                        </select>
                    </div>
                    <div class="size-100 subtask-container padding-top-big"> 
                        <div>
                            <span>Subtasks</span>
                        </div>
                        <div class="flex focus-blue ai-center">
                            <input id="subTaskInputBoard" type="text" placeholder="Add new subtask" minlength="4" >
                            <div  class="subtask">
                                <img id="subTaskBoard" onclick="hideAndShowEditBoard()" src="../assets/img/icons/add.png" alt="">
                            </div>
                            <div id="editBoard" class="flex d-none">
                                <div>
                                    <img class="edit" onclick="clearInputAddTaskBoard()" src="../assets/img/svg/Subtasks icons11.svg" alt="">
                                </div>
                                <div class="seperator"></div>
                                <div>
                                    <img class="edit" onclick="addSubtaskBoard()" src="../assets/img/svg/Subtasks icons12.svg" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="subTaskContainer">
                            <div id="subTaskContainerBoard">

                            </div>  
                        </div>
                    </div>
                </div>
                
            </section>
        </section>  
    
        <div class="button-container-board flex">
            <span><span class="red">*</span>This field is required</span>
            <div id="boardAddTaskBtns" class="flex">
                <a onclick="clearTaskBoard()" class="btn-white clear-task-board-btn"><span>Clear</span> <img src="../assets/img/icons/x.png" alt=""></a>
                <button type="submit" class="btn-dark">Create Task <img src="../assets/img/icons/check_icon.png" alt=""></button>    
            </div>
        </div>
    </form>
</section>


<section id="editTaskFullScreen" class="add-task-background">
    
    <section onclick="doNotClose(event); closeContactList('selected-contactsEdit')" style="position: relative;" id="editTaskSection" class=" edit-task-card">
        <div class="edit-close" id="closeEditBtnBoard">
            <img onclick="breakEditSession()" class="close-img pointer" src="../assets/img/icons/close.png">
        </div>
        <section class="edit-task">
            <section class="add-task-section">
                <div class="size-100 padding-top-big"> 
                    <div style="display: flex;
                    ">
                        <span style="
                        margin-top: 35px;
                    ">Title</span>

                    </div>
                    <input required id="titleEdit" type="text" placeholder="Enter a title" required minlength="4" >
                </div>
                <div class="size-100 padding-top-big">
                    <div>
                        <span>Description</span>
                    </div>
                    <textarea id="descriptionEdit" placeholder="Enter a Description" name="" cols="30" rows="3"></textarea>
                </div>
                
            </section>    
            <section class="add-task-section">
                <div class="size-100 padding-top-big"> 
                    <div>
                        <span>Due date</span><span class="red">*</span>
                    </div>
                    <input id="dateEdit" type="date" min="" max="9999-12-31">
                </div>
                <div class="prio-container padding-top-big">
                    <span class="colorEdit">Priority</span>
                    <section class="prio-button-section">
                        <div id="urgentEdit" onclick="handleClickPrioEdit('urgent', 'edit')" class="prio-button">
                            <span id="prio_urgentEdit">Urgent</span> 
                            <div class="arrow">
                                <img src="../assets/img/svg/up.svg">
                            </div>
                        </div>
                        <div id="mediumEdit" onclick="handleClickPrioEdit('medium', 'edit')" class="prio-button">
                            <span id="prio_mediumEdit">Medium</span>  
                            <div class="arrow">
                                <img src="../assets/img/svg/line.svg">
                            </div>
                        </div>
                        <div id="lowEdit" onclick="handleClickPrioEdit('low', 'edit')" class="prio-button">
                            <span id="prio_lowEdit">Low</span>
                            <div class="arrow">
                                <img src="../assets/img/svg/down.svg">
                            </div>
                        </div>
                    </section>
                    <div onclick="doNotClose(event);" class="size-100 padding-top-big">
                        <div>
                            <span class="colorEdit">Assigned to</span>
                        </div>
                        <input oninput="setFilterEdit(this)" required type="text" onclick="showContactListEdit()" class="styled-input" placeholder="Select contacts to assign" id="contact-selectEdit" name="contacts">
                        <section class="d-none contact-list" id="selected-contactsEdit" autocomplete="off"></section>
                        <div id="contactInitalsEdit"></div>
                    </input>
                    </div>
                    <div class="size-100 subtask-container padding-top-big"> 
                        <div>
                            <span class="colorEdit">Subtasks</span>
                        </div>
                        <div class="flex focus-blue">
                            <input id="subTaskInputEdit" type="text" placeholder="Add new subtask" minlength="4" >
                            <div  class="subtask">
                                <img id="subTaskEdit" onclick="hideAndShowEdit()" src="../assets/img/icons/add.png" alt="">
                            </div>
                            <div id="editEditContainer" class="double-button flex d-none">
                                <div>
                                    <img class="edit" onclick="clearInputAddTaskEdit()" src="../assets/img/svg/Subtasks icons11.svg" alt="">
                                </div>
                                <div class="seperator"></div>
                                <div>
                                    <img class="edit" onclick="addSubtaskEdit()" src="../assets/img/svg/Subtasks icons12.svg" alt="">
                                </div>
                            </div>
                        </div>
                        <div class="subTaskContainer">
                            <div id="subTaskContainerEdit">

                            </div>  
                        </div>
                    </div>
                </div>
                
            </section>
        </section>  
    
        <div class="button-container-board flex">
            <div id="boardEditTaskBtns" class="flex">
                <button class="btn-dark-edit">Ok 
                    <img src="../assets/img/icons/check_icon.png" alt="">
                </button>    
            </div>
        </div>
    </section>
</section>

<div class="btn-dark-large d-none" id="msgBox"></div>

<script>
    const urlParams = new URLSearchParams(window.location.search);
    const msg = urlParams.get("msg");
    const msgBox = document.getElementById("msgBox");

    if (msg) {
      msgBox.innerHTML = msg;
      msgBox.classList.remove("d-none");
      setTimeout(function () {
        msgBox.classList.add("hide-animation");
      }, 3000);
      setTimeout(function () {
        msgBox.classList.add("d-none");
      }, 5000);
    }
  </script>
<script>
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('dateBoard').setAttribute('min', today);
    const today2 = new Date().toISOString().split('T')[0];
    document.getElementById('dateEdit').setAttribute('min', today2);
</script>         

    <div id="navMobile" w3-include-html="../assets/templates/navAktivMobile/navBoard.html"></div>

    <div id="navDesktop" w3-include-html="../assets/templates/navAktivDesktop/navBoardDesktop.html"></div>

</body>
</html>